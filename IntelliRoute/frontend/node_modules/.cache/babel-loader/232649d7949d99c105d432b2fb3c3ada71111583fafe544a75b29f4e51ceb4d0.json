{"ast":null,"code":"var _jsxFileName = \"/home/anubhav/project_6/auth-system/frontend/src/components/NotificationsPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useContext } from 'react';\nimport { ChatContext } from '../context/ChatContext';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck, faTimes, faBell, faComment } from '@fortawesome/free-solid-svg-icons';\nimport './NotificationsPanel.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NotificationsPanel = ({\n  onClose\n}) => {\n  _s();\n  const {\n    notifications,\n    acceptChatRequest,\n    declineChatRequest,\n    loading,\n    chatAcceptanceStatus,\n    handleNotificationClick\n  } = useContext(ChatContext);\n  const handleAccept = async (chatRoomId, notificationId) => {\n    try {\n      console.log('Accepting chat request:', chatRoomId);\n      await acceptChatRequest(chatRoomId);\n\n      // Panel will close automatically when the chat opens\n      if (onClose) onClose();\n    } catch (error) {\n      console.error('Error accepting chat request:', error);\n    }\n  };\n  const handleDecline = async chatRoomId => {\n    try {\n      console.log('Declining chat request:', chatRoomId);\n      await declineChatRequest(chatRoomId);\n    } catch (error) {\n      console.error('Error declining chat request:', error);\n    }\n  };\n  const handleNotificationItemClick = async notification => {\n    // For chat_request notifications, don't do anything on click\n    // since we have explicit accept/decline buttons\n    if (notification.type === 'chat_request') {\n      return;\n    }\n    await handleNotificationClick(notification);\n\n    // Close the panel\n    if (onClose) onClose();\n  };\n  const formatTime = dateString => {\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch (e) {\n      return '';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"notifications-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notifications-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faBell\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), \" Notifications\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-button\",\n        onClick: onClose,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), chatAcceptanceStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `chat-acceptance-status ${chatAcceptanceStatus.status}`,\n      children: chatAcceptanceStatus.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notifications-list\",\n      children: notifications && notifications.length > 0 ? notifications.map(notification => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `notification-item ${notification.type}`,\n        onClick: () => handleNotificationItemClick(notification),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notification-icon\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: notification.type.includes('chat') ? faComment : faBell\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notification-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notification-message\",\n            children: notification.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notification-time\",\n            children: formatTime(notification.created_at)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this), notification.type === 'chat_request' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notification-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"notification-accept\",\n            onClick: e => {\n              e.stopPropagation();\n              handleAccept(notification.chat_room_id, notification.id);\n            },\n            disabled: loading,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faCheck\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"notification-decline\",\n            onClick: e => {\n              e.stopPropagation();\n              handleDecline(notification.chat_room_id);\n            },\n            disabled: loading,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faTimes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this)]\n      }, notification.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-notifications\",\n        children: \"No new notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(NotificationsPanel, \"R1HBRbAnv4CaowFDPLwZLqXrPnw=\");\n_c = NotificationsPanel;\nexport default NotificationsPanel;\nvar _c;\n$RefreshReg$(_c, \"NotificationsPanel\");","map":{"version":3,"names":["React","useContext","ChatContext","FontAwesomeIcon","faCheck","faTimes","faBell","faComment","jsxDEV","_jsxDEV","NotificationsPanel","onClose","_s","notifications","acceptChatRequest","declineChatRequest","loading","chatAcceptanceStatus","handleNotificationClick","handleAccept","chatRoomId","notificationId","console","log","error","handleDecline","handleNotificationItemClick","notification","type","formatTime","dateString","date","Date","toLocaleTimeString","hour","minute","e","className","children","icon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","status","message","length","map","includes","created_at","stopPropagation","chat_room_id","id","disabled","_c","$RefreshReg$"],"sources":["/home/anubhav/project_6/auth-system/frontend/src/components/NotificationsPanel.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { ChatContext } from '../context/ChatContext';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck, faTimes, faBell, faComment } from '@fortawesome/free-solid-svg-icons';\nimport './NotificationsPanel.css';\n\nconst NotificationsPanel = ({ onClose }) => {\n  const { \n    notifications, \n    acceptChatRequest, \n    declineChatRequest, \n    loading,\n    chatAcceptanceStatus,\n    handleNotificationClick\n  } = useContext(ChatContext);\n\n  const handleAccept = async (chatRoomId, notificationId) => {\n    try {\n      console.log('Accepting chat request:', chatRoomId);\n      await acceptChatRequest(chatRoomId);\n      \n      // Panel will close automatically when the chat opens\n      if (onClose) onClose();\n    } catch (error) {\n      console.error('Error accepting chat request:', error);\n    }\n  };\n\n  const handleDecline = async (chatRoomId) => {\n    try {\n      console.log('Declining chat request:', chatRoomId);\n      await declineChatRequest(chatRoomId);\n    } catch (error) {\n      console.error('Error declining chat request:', error);\n    }\n  };\n\n  const handleNotificationItemClick = async (notification) => {\n    // For chat_request notifications, don't do anything on click\n    // since we have explicit accept/decline buttons\n    if (notification.type === 'chat_request') {\n      return;\n    }\n    \n    await handleNotificationClick(notification);\n    \n    // Close the panel\n    if (onClose) onClose();\n  };\n\n  const formatTime = (dateString) => {\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    } catch (e) {\n      return '';\n    }\n  };\n\n  return (\n    <div className=\"notifications-panel\">\n      <div className=\"notifications-header\">\n        <h3><FontAwesomeIcon icon={faBell} /> Notifications</h3>\n        <button className=\"close-button\" onClick={onClose}>&times;</button>\n      </div>\n      \n      {chatAcceptanceStatus && (\n        <div className={`chat-acceptance-status ${chatAcceptanceStatus.status}`}>\n          {chatAcceptanceStatus.message}\n        </div>\n      )}\n      \n      <div className=\"notifications-list\">\n        {notifications && notifications.length > 0 ? (\n          notifications.map(notification => (\n            <div \n              key={notification.id} \n              className={`notification-item ${notification.type}`}\n              onClick={() => handleNotificationItemClick(notification)}\n            >\n              <div className=\"notification-icon\">\n                <FontAwesomeIcon icon={notification.type.includes('chat') ? faComment : faBell} />\n              </div>\n              <div className=\"notification-content\">\n                <div className=\"notification-message\">{notification.message}</div>\n                <div className=\"notification-time\">{formatTime(notification.created_at)}</div>\n              </div>\n              \n              {notification.type === 'chat_request' && (\n                <div className=\"notification-actions\">\n                  <button \n                    className=\"notification-accept\" \n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleAccept(notification.chat_room_id, notification.id);\n                    }}\n                    disabled={loading}\n                  >\n                    <FontAwesomeIcon icon={faCheck} />\n                  </button>\n                  <button \n                    className=\"notification-decline\" \n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleDecline(notification.chat_room_id);\n                    }}\n                    disabled={loading}\n                  >\n                    <FontAwesomeIcon icon={faTimes} />\n                  </button>\n                </div>\n              )}\n            </div>\n          ))\n        ) : (\n          <div className=\"no-notifications\">No new notifications</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NotificationsPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}