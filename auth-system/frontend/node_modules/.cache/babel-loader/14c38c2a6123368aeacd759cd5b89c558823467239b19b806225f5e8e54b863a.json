{"ast":null,"code":"var _jsxFileName = \"/home/projectwork/project/project_6/auth-system/frontend/src/components/UserLocationMap.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useContext, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport { LocationContext } from '../context/LocationContext';\nimport { AuthContext } from '../context/AuthContext';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './UserLocationMap.css';\n\n// Fix for default icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Create custom icons\nconst createCustomIcon = color => {\n  return L.divIcon({\n    className: 'custom-div-icon',\n    html: `<div class=\"marker-pin\" style=\"background-color: ${color};\"></div>`,\n    iconSize: [30, 42],\n    iconAnchor: [15, 42]\n  });\n};\n\n// Component to update map bounds based on users' positions\nfunction MapBoundsUpdater({\n  users,\n  paths\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (!users.length && !paths.length) return;\n    try {\n      // Collect all points from users and paths\n      const points = [];\n\n      // Add user points\n      users.forEach(user => {\n        if (user.latitude && user.longitude) {\n          points.push([user.latitude, user.longitude]);\n        }\n      });\n\n      // Add path points\n      paths.forEach(path => {\n        if (path.route && Array.isArray(path.route)) {\n          path.route.forEach(point => {\n            if (Array.isArray(point) && point.length >= 2) {\n              points.push([point[0], point[1]]);\n            }\n          });\n        }\n      });\n      if (points.length > 0) {\n        const bounds = L.latLngBounds(points);\n        map.fitBounds(bounds, {\n          padding: [50, 50]\n        });\n      }\n    } catch (error) {\n      console.error('Error updating map bounds:', error);\n    }\n  }, [users, paths, map]);\n  return null;\n}\n\n// Helper to parse route data from PostGIS\n_s(MapBoundsUpdater, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = MapBoundsUpdater;\nconst parseRouteData = routeData => {\n  if (!routeData) return [];\n\n  // Check if it's a WKT LINESTRING\n  if (typeof routeData === 'string' && routeData.startsWith('LINESTRING')) {\n    try {\n      // Parse the LINESTRING(lng lat, lng lat, ...) format\n      const coordsStr = routeData.substring(11, routeData.length - 1);\n      return coordsStr.split(',').map(pair => {\n        const [lng, lat] = pair.trim().split(' ');\n        return [parseFloat(lat), parseFloat(lng)]; // Leaflet uses [lat, lng]\n      });\n    } catch (e) {\n      console.error('Error parsing LINESTRING:', e);\n      return [];\n    }\n  }\n\n  // If it's already an array, return it directly (assumed to be in [lat, lng] format)\n  if (Array.isArray(routeData)) {\n    return routeData;\n  }\n\n  // Try to parse as JSON\n  if (typeof routeData === 'string') {\n    try {\n      const parsed = JSON.parse(routeData);\n      if (Array.isArray(parsed)) {\n        return parsed;\n      }\n    } catch (e) {\n      // Not valid JSON, ignore\n    }\n  }\n  return [];\n};\nconst UserLocationMap = () => {\n  _s2();\n  const {\n    liveUsers,\n    fetchLiveUsers,\n    livePaths,\n    fetchLivePaths,\n    createPath\n  } = useContext(LocationContext);\n  const {\n    user\n  } = useContext(AuthContext);\n  const [usersWithLocation, setUsersWithLocation] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState(new Date());\n  const [pathsWithCoordinates, setPathsWithCoordinates] = useState([]);\n  const [routeMode, setRouteMode] = useState(false);\n  const [selectedSource, setSelectedSource] = useState(null);\n  const mapRef = useRef(null);\n  useEffect(() => {\n    const loadMapData = async () => {\n      setIsLoading(true);\n      await Promise.all([fetchLiveUsers(), fetchLivePaths()]);\n      setLastUpdated(new Date());\n      setIsLoading(false);\n    };\n    loadMapData();\n    const intervalId = setInterval(loadMapData, 30000); // Refresh every 30 seconds\n\n    return () => clearInterval(intervalId);\n  }, [fetchLiveUsers, fetchLivePaths]);\n  useEffect(() => {\n    if (liveUsers) {\n      const filtered = liveUsers.filter(u => u.latitude && u.longitude);\n      setUsersWithLocation(filtered);\n    }\n  }, [liveUsers]);\n  useEffect(() => {\n    if (livePaths) {\n      const parsed = livePaths.map(path => ({\n        ...path,\n        parsedRoute: parseRouteData(path.route)\n      })).filter(path => path.parsedRoute.length > 0);\n      setPathsWithCoordinates(parsed);\n    }\n  }, [livePaths]);\n\n  // Find this function in your UserLocationMap.jsx\n  const handleMapClick = e => {\n    // Add this safety check at the beginning of the function\n    if (!e || !e.latlng) {\n      console.warn('Invalid click event or missing latlng property:', e);\n      return;\n    }\n    if (!routeMode) return;\n    const {\n      lat,\n      lng\n    } = e.latlng;\n    if (!selectedSource) {\n      // Set source\n      setSelectedSource({\n        lat,\n        lng\n      });\n    } else {\n      // Set destination and create path\n      const destination = {\n        lat,\n        lng\n      };\n      createPath(selectedSource, destination);\n\n      // Reset route mode\n      setRouteMode(false);\n      setSelectedSource(null);\n    }\n  };\n  const toggleRouteMode = () => {\n    setRouteMode(!routeMode);\n    if (routeMode) {\n      // If turning off, clear selected source\n      setSelectedSource(null);\n    }\n  };\n  const formatTime = date => {\n    if (!(date instanceof Date)) {\n      try {\n        date = new Date(date);\n      } catch (e) {\n        return 'Unknown';\n      }\n    }\n    return date.toLocaleTimeString();\n  };\n  if (isLoading && usersWithLocation.length === 0 && pathsWithCoordinates.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-loading\",\n      children: \"Loading map...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Calculate center point for map display or use a default\n  let centerLat = 0,\n    centerLng = 0;\n  if (usersWithLocation.length > 0) {\n    centerLat = usersWithLocation.reduce((sum, u) => sum + u.latitude, 0) / usersWithLocation.length;\n    centerLng = usersWithLocation.reduce((sum, u) => sum + u.longitude, 0) / usersWithLocation.length;\n  } else {\n    // Default to a central location if no users\n    centerLat = 0;\n    centerLng = 0;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Live User Map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `route-button ${routeMode ? 'active' : ''}`,\n          onClick: toggleRouteMode,\n          children: routeMode ? 'Cancel Route' : 'Create Route'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), routeMode && !selectedSource && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"route-instructions\",\n          children: \"Click on map to set starting point\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this), routeMode && selectedSource && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"route-instructions\",\n          children: \"Click on map to set destination\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"last-updated\",\n          children: [\"Last updated: \", formatTime(lastUpdated)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [centerLat, centerLng],\n      zoom: 3,\n      style: {\n        height: '600px',\n        width: '100%'\n      },\n      ref: mapRef,\n      onClick: handleMapClick,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), usersWithLocation.map(u => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [u.latitude, u.longitude],\n        icon: createCustomIcon(u.id === (user === null || user === void 0 ? void 0 : user.id) ? '#4285F4' : '#FF5722'),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-popup\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: u.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-status\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this), \"Online\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-location\",\n              children: [\"Coordinates: \", u.latitude.toFixed(4), \", \", u.longitude.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-last-active\",\n              children: [\"Last active: \", formatTime(u.last_active)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 17\n            }, this), u.id === (user === null || user === void 0 ? void 0 : user.id) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-user-tag\",\n              children: \"This is you\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)\n      }, `user-${u.id}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this)), routeMode && selectedSource && /*#__PURE__*/_jsxDEV(Marker, {\n        position: [selectedSource.lat, selectedSource.lng],\n        icon: createCustomIcon('#00C853'),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Starting point\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }, this), pathsWithCoordinates.map((path, idx) => /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: path.parsedRoute,\n        color: path.user_id === (user === null || user === void 0 ? void 0 : user.id) ? '#2196F3' : '#FF5722',\n        weight: 4,\n        opacity: 0.7,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"path-popup\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Route Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"User:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 20\n              }, this), \" \", path.username || 'Unknown']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Created:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 20\n              }, this), \" \", formatTime(path.created_at)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this), path.parsedRoute.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"From:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 24\n                }, this), \" \", path.parsedRoute[0][0].toFixed(4), \", \", path.parsedRoute[0][1].toFixed(4)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"To:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 24\n                }, this), \" \", path.parsedRoute[path.parsedRoute.length - 1][0].toFixed(4), \", \", path.parsedRoute[path.parsedRoute.length - 1][1].toFixed(4)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this)\n      }, `path-${path.id || idx}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(MapBoundsUpdater, {\n        users: usersWithLocation,\n        paths: pathsWithCoordinates\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), routeMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: handleMapClick,\n        style: {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          zIndex: 1000,\n          cursor: 'crosshair',\n          pointerEvents: routeMode ? 'auto' : 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-legend\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Map Legend\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-items\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-marker\",\n            style: {\n              backgroundColor: '#4285F4'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Your location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-marker\",\n            style: {\n              backgroundColor: '#FF5722'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Other users\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-line\",\n            style: {\n              backgroundColor: '#2196F3'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Your paths\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-line\",\n            style: {\n              backgroundColor: '#FF5722'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Other users' paths\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), routeMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-marker\",\n            style: {\n              backgroundColor: '#00C853'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Selected starting point\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-info-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Statistics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-stats\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Active Users:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), \" \", usersWithLocation.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Active Paths:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), \" \", pathsWithCoordinates.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Last Updated:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), \" \", formatTime(lastUpdated)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), pathsWithCoordinates.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recent-paths\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Recent Paths\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paths-list\",\n          children: pathsWithCoordinates.slice(0, 5).map((path, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"path-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"path-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: path.username || 'Unknown user'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: formatTime(path.created_at)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"path-details\",\n              children: path.parsedRoute.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"From: \", path.parsedRoute[0][0].toFixed(4), \", \", path.parsedRoute[0][1].toFixed(4)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"To: \", path.parsedRoute[path.parsedRoute.length - 1][0].toFixed(4), \", \", path.parsedRoute[path.parsedRoute.length - 1][1].toFixed(4)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 19\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 5\n  }, this);\n};\n_s2(UserLocationMap, \"0HrCTNT000YMtTsNI1qXIF9GKiw=\");\n_c2 = UserLocationMap;\nexport default UserLocationMap;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapBoundsUpdater\");\n$RefreshReg$(_c2, \"UserLocationMap\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useRef","MapContainer","TileLayer","Marker","Popup","Polyline","useMap","LocationContext","AuthContext","L","icon","iconShadow","jsxDEV","_jsxDEV","Fragment","_Fragment","DefaultIcon","iconUrl","shadowUrl","iconSize","iconAnchor","prototype","options","createCustomIcon","color","divIcon","className","html","MapBoundsUpdater","users","paths","_s","map","length","points","forEach","user","latitude","longitude","push","path","route","Array","isArray","point","bounds","latLngBounds","fitBounds","padding","error","console","_c","parseRouteData","routeData","startsWith","coordsStr","substring","split","pair","lng","lat","trim","parseFloat","e","parsed","JSON","parse","UserLocationMap","_s2","liveUsers","fetchLiveUsers","livePaths","fetchLivePaths","createPath","usersWithLocation","setUsersWithLocation","isLoading","setIsLoading","lastUpdated","setLastUpdated","Date","pathsWithCoordinates","setPathsWithCoordinates","routeMode","setRouteMode","selectedSource","setSelectedSource","mapRef","loadMapData","Promise","all","intervalId","setInterval","clearInterval","filtered","filter","u","parsedRoute","handleMapClick","latlng","warn","destination","toggleRouteMode","formatTime","date","toLocaleTimeString","children","fileName","_jsxFileName","lineNumber","columnNumber","centerLat","centerLng","reduce","sum","onClick","center","zoom","style","height","width","ref","attribution","url","position","id","username","toFixed","last_active","idx","positions","user_id","weight","opacity","created_at","top","left","right","bottom","zIndex","cursor","pointerEvents","backgroundColor","slice","_c2","$RefreshReg$"],"sources":["/home/projectwork/project/project_6/auth-system/frontend/src/components/UserLocationMap.js"],"sourcesContent":["import React, { useEffect, useState, useContext, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport { LocationContext } from '../context/LocationContext';\nimport { AuthContext } from '../context/AuthContext';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './UserLocationMap.css';\n\n// Fix for default icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Create custom icons\nconst createCustomIcon = (color) => {\n  return L.divIcon({\n    className: 'custom-div-icon',\n    html: `<div class=\"marker-pin\" style=\"background-color: ${color};\"></div>`,\n    iconSize: [30, 42],\n    iconAnchor: [15, 42]\n  });\n};\n\n// Component to update map bounds based on users' positions\nfunction MapBoundsUpdater({ users, paths }) {\n  const map = useMap();\n  \n  useEffect(() => {\n    if (!users.length && !paths.length) return;\n    \n    try {\n      // Collect all points from users and paths\n      const points = [];\n      \n      // Add user points\n      users.forEach(user => {\n        if (user.latitude && user.longitude) {\n          points.push([user.latitude, user.longitude]);\n        }\n      });\n      \n      // Add path points\n      paths.forEach(path => {\n        if (path.route && Array.isArray(path.route)) {\n          path.route.forEach(point => {\n            if (Array.isArray(point) && point.length >= 2) {\n              points.push([point[0], point[1]]);\n            }\n          });\n        }\n      });\n      \n      if (points.length > 0) {\n        const bounds = L.latLngBounds(points);\n        map.fitBounds(bounds, { padding: [50, 50] });\n      }\n    } catch (error) {\n      console.error('Error updating map bounds:', error);\n    }\n  }, [users, paths, map]);\n  \n  return null;\n}\n\n// Helper to parse route data from PostGIS\nconst parseRouteData = (routeData) => {\n  if (!routeData) return [];\n  \n  // Check if it's a WKT LINESTRING\n  if (typeof routeData === 'string' && routeData.startsWith('LINESTRING')) {\n    try {\n      // Parse the LINESTRING(lng lat, lng lat, ...) format\n      const coordsStr = routeData.substring(11, routeData.length - 1);\n      return coordsStr.split(',').map(pair => {\n        const [lng, lat] = pair.trim().split(' ');\n        return [parseFloat(lat), parseFloat(lng)]; // Leaflet uses [lat, lng]\n      });\n    } catch (e) {\n      console.error('Error parsing LINESTRING:', e);\n      return [];\n    }\n  }\n  \n  // If it's already an array, return it directly (assumed to be in [lat, lng] format)\n  if (Array.isArray(routeData)) {\n    return routeData;\n  }\n  \n  // Try to parse as JSON\n  if (typeof routeData === 'string') {\n    try {\n      const parsed = JSON.parse(routeData);\n      if (Array.isArray(parsed)) {\n        return parsed;\n      }\n    } catch (e) {\n      // Not valid JSON, ignore\n    }\n  }\n  \n  return [];\n};\n\nconst UserLocationMap = () => {\n  const { liveUsers, fetchLiveUsers, livePaths, fetchLivePaths, createPath } = useContext(LocationContext);\n  const { user } = useContext(AuthContext);\n  const [usersWithLocation, setUsersWithLocation] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState(new Date());\n  const [pathsWithCoordinates, setPathsWithCoordinates] = useState([]);\n  const [routeMode, setRouteMode] = useState(false);\n  const [selectedSource, setSelectedSource] = useState(null);\n  const mapRef = useRef(null);\n\n  useEffect(() => {\n    const loadMapData = async () => {\n      setIsLoading(true);\n      await Promise.all([fetchLiveUsers(), fetchLivePaths()]);\n      setLastUpdated(new Date());\n      setIsLoading(false);\n    };\n\n    loadMapData();\n    const intervalId = setInterval(loadMapData, 30000); // Refresh every 30 seconds\n    \n    return () => clearInterval(intervalId);\n  }, [fetchLiveUsers, fetchLivePaths]);\n\n  useEffect(() => {\n    if (liveUsers) {\n      const filtered = liveUsers.filter(u => u.latitude && u.longitude);\n      setUsersWithLocation(filtered);\n    }\n  }, [liveUsers]);\n\n  useEffect(() => {\n    if (livePaths) {\n      const parsed = livePaths.map(path => ({\n        ...path,\n        parsedRoute: parseRouteData(path.route)\n      })).filter(path => path.parsedRoute.length > 0);\n      \n      setPathsWithCoordinates(parsed);\n    }\n  }, [livePaths]);\n\n  // Find this function in your UserLocationMap.jsx\nconst handleMapClick = (e) => {\n  // Add this safety check at the beginning of the function\n  if (!e || !e.latlng) {\n    console.warn('Invalid click event or missing latlng property:', e);\n    return;\n  }\n  \n  if (!routeMode) return;\n  \n  const { lat, lng } = e.latlng;\n  \n  if (!selectedSource) {\n    // Set source\n    setSelectedSource({ lat, lng });\n  } else {\n    // Set destination and create path\n    const destination = { lat, lng };\n    createPath(selectedSource, destination);\n    \n    // Reset route mode\n    setRouteMode(false);\n    setSelectedSource(null);\n  }\n};\n  const toggleRouteMode = () => {\n    setRouteMode(!routeMode);\n    if (routeMode) {\n      // If turning off, clear selected source\n      setSelectedSource(null);\n    }\n  };\n\n  const formatTime = (date) => {\n    if (!(date instanceof Date)) {\n      try {\n        date = new Date(date);\n      } catch (e) {\n        return 'Unknown';\n      }\n    }\n    return date.toLocaleTimeString();\n  };\n\n  if (isLoading && usersWithLocation.length === 0 && pathsWithCoordinates.length === 0) {\n    return <div className=\"map-loading\">Loading map...</div>;\n  }\n\n  // Calculate center point for map display or use a default\n  let centerLat = 0, centerLng = 0;\n  \n  if (usersWithLocation.length > 0) {\n    centerLat = usersWithLocation.reduce((sum, u) => sum + u.latitude, 0) / usersWithLocation.length;\n    centerLng = usersWithLocation.reduce((sum, u) => sum + u.longitude, 0) / usersWithLocation.length;\n  } else {\n    // Default to a central location if no users\n    centerLat = 0;\n    centerLng = 0;\n  }\n\n  return (\n    <div className=\"map-container\">\n      <div className=\"map-header\">\n        <h3>Live User Map</h3>\n        <div className=\"map-controls\">\n          <button \n            className={`route-button ${routeMode ? 'active' : ''}`} \n            onClick={toggleRouteMode}\n          >\n            {routeMode ? 'Cancel Route' : 'Create Route'}\n          </button>\n          \n          {routeMode && !selectedSource && (\n            <div className=\"route-instructions\">Click on map to set starting point</div>\n          )}\n          \n          {routeMode && selectedSource && (\n            <div className=\"route-instructions\">Click on map to set destination</div>\n          )}\n          \n          <span className=\"last-updated\">\n            Last updated: {formatTime(lastUpdated)}\n          </span>\n        </div>\n      </div>\n      \n      <MapContainer \n        center={[centerLat, centerLng]} \n        zoom={3} \n        style={{ height: '600px', width: '100%' }}\n        ref={mapRef}\n        onClick={handleMapClick}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        \n        {/* Display user markers */}\n        {usersWithLocation.map(u => (\n          <Marker \n            key={`user-${u.id}`} \n            position={[u.latitude, u.longitude]}\n            icon={createCustomIcon(u.id === user?.id ? '#4285F4' : '#FF5722')}\n          >\n            <Popup>\n              <div className=\"user-popup\">\n                <h3>{u.username}</h3>\n                <div className=\"user-status\">\n                  <span className=\"status-dot\"></span>\n                  Online\n                </div>\n                <div className=\"user-location\">\n                  Coordinates: {u.latitude.toFixed(4)}, {u.longitude.toFixed(4)}\n                </div>\n                <div className=\"user-last-active\">\n                  Last active: {formatTime(u.last_active)}\n                </div>\n                {u.id === user?.id && (\n                  <div className=\"current-user-tag\">This is you</div>\n                )}\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n        \n        {/* Display route source marker if in route mode */}\n        {routeMode && selectedSource && (\n          <Marker \n            position={[selectedSource.lat, selectedSource.lng]}\n            icon={createCustomIcon('#00C853')}\n          >\n            <Popup>Starting point</Popup>\n          </Marker>\n        )}\n        \n        {/* Display paths as polylines */}\n        {pathsWithCoordinates.map((path, idx) => (\n          <Polyline \n            key={`path-${path.id || idx}`} \n            positions={path.parsedRoute} \n            color={path.user_id === user?.id ? '#2196F3' : '#FF5722'} \n            weight={4}\n            opacity={0.7}\n          >\n            <Popup>\n              <div className=\"path-popup\">\n                <h4>Route Information</h4>\n                <p><strong>User:</strong> {path.username || 'Unknown'}</p>\n                <p><strong>Created:</strong> {formatTime(path.created_at)}</p>\n                {path.parsedRoute.length > 0 && (\n                  <>\n                    <p><strong>From:</strong> {path.parsedRoute[0][0].toFixed(4)}, {path.parsedRoute[0][1].toFixed(4)}</p>\n                    <p><strong>To:</strong> {path.parsedRoute[path.parsedRoute.length-1][0].toFixed(4)}, {path.parsedRoute[path.parsedRoute.length-1][1].toFixed(4)}</p>\n                  </>\n                )}\n              </div>\n            </Popup>\n          </Polyline>\n        ))}\n\n        {/* Map bounds updater component */}\n        <MapBoundsUpdater \n          users={usersWithLocation} \n          paths={pathsWithCoordinates} \n        />\n        \n        {/* Add a click handler to the map */}\n        {routeMode && (\n          <div \n            onClick={handleMapClick}\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              zIndex: 1000,\n              cursor: 'crosshair',\n              pointerEvents: routeMode ? 'auto' : 'none'\n            }}\n          />\n        )}\n      </MapContainer>\n      \n      <div className=\"map-legend\">\n        <h4>Map Legend</h4>\n        <div className=\"legend-items\">\n          <div className=\"legend-item\">\n            <div className=\"legend-marker\" style={{ backgroundColor: '#4285F4' }}></div>\n            <span>Your location</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-marker\" style={{ backgroundColor: '#FF5722' }}></div>\n            <span>Other users</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-line\" style={{ backgroundColor: '#2196F3' }}></div>\n            <span>Your paths</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-line\" style={{ backgroundColor: '#FF5722' }}></div>\n            <span>Other users' paths</span>\n          </div>\n          {routeMode && (\n            <div className=\"legend-item\">\n              <div className=\"legend-marker\" style={{ backgroundColor: '#00C853' }}></div>\n              <span>Selected starting point</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Display path information */}\n      <div className=\"map-info-panel\">\n        <h4>Statistics</h4>\n        <div className=\"map-stats\">\n          <div className=\"stat-item\">\n            <strong>Active Users:</strong> {usersWithLocation.length}\n          </div>\n          <div className=\"stat-item\">\n            <strong>Active Paths:</strong> {pathsWithCoordinates.length}\n          </div>\n          <div className=\"stat-item\">\n            <strong>Last Updated:</strong> {formatTime(lastUpdated)}\n          </div>\n        </div>\n        \n        {pathsWithCoordinates.length > 0 && (\n          <div className=\"recent-paths\">\n            <h4>Recent Paths</h4>\n            <div className=\"paths-list\">\n              {pathsWithCoordinates.slice(0, 5).map((path, idx) => (\n                <div key={idx} className=\"path-item\">\n                  <div className=\"path-header\">\n                    <strong>{path.username || 'Unknown user'}</strong>\n                    <span>{formatTime(path.created_at)}</span>\n                  </div>\n                  <div className=\"path-details\">\n                    {path.parsedRoute.length > 0 && (\n                      <>\n                        <small>\n                          From: {path.parsedRoute[0][0].toFixed(4)}, {path.parsedRoute[0][1].toFixed(4)}\n                        </small>\n                        <small>\n                          To: {path.parsedRoute[path.parsedRoute.length-1][0].toFixed(4)}, {path.parsedRoute[path.parsedRoute.length-1][1].toFixed(4)}\n                        </small>\n                      </>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UserLocationMap;"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,MAAM,QAAQ,OAAO;AACtE,SAASC,YAAY,EAAEC,SAAS,EAAEC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,eAAe;AACxF,SAASC,eAAe,QAAQ,4BAA4B;AAC5D,SAASC,WAAW,QAAQ,wBAAwB;AACpD,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;AACjC,OAAO,uBAAuB;;AAE9B;AACA,OAAOC,IAAI,MAAM,qCAAqC;AACtD,OAAOC,UAAU,MAAM,uCAAuC;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE/D,IAAIC,WAAW,GAAGP,CAAC,CAACC,IAAI,CAAC;EACvBO,OAAO,EAAEP,IAAI;EACbQ,SAAS,EAAEP,UAAU;EACrBQ,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;EAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;AACrB,CAAC,CAAC;AAEFX,CAAC,CAACN,MAAM,CAACkB,SAAS,CAACC,OAAO,CAACZ,IAAI,GAAGM,WAAW;;AAE7C;AACA,MAAMO,gBAAgB,GAAIC,KAAK,IAAK;EAClC,OAAOf,CAAC,CAACgB,OAAO,CAAC;IACfC,SAAS,EAAE,iBAAiB;IAC5BC,IAAI,EAAE,oDAAoDH,KAAK,WAAW;IAC1EL,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;EACrB,CAAC,CAAC;AACJ,CAAC;;AAED;AACA,SAASQ,gBAAgBA,CAAC;EAAEC,KAAK;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EAC1C,MAAMC,GAAG,GAAG1B,MAAM,CAAC,CAAC;EAEpBT,SAAS,CAAC,MAAM;IACd,IAAI,CAACgC,KAAK,CAACI,MAAM,IAAI,CAACH,KAAK,CAACG,MAAM,EAAE;IAEpC,IAAI;MACF;MACA,MAAMC,MAAM,GAAG,EAAE;;MAEjB;MACAL,KAAK,CAACM,OAAO,CAACC,IAAI,IAAI;QACpB,IAAIA,IAAI,CAACC,QAAQ,IAAID,IAAI,CAACE,SAAS,EAAE;UACnCJ,MAAM,CAACK,IAAI,CAAC,CAACH,IAAI,CAACC,QAAQ,EAAED,IAAI,CAACE,SAAS,CAAC,CAAC;QAC9C;MACF,CAAC,CAAC;;MAEF;MACAR,KAAK,CAACK,OAAO,CAACK,IAAI,IAAI;QACpB,IAAIA,IAAI,CAACC,KAAK,IAAIC,KAAK,CAACC,OAAO,CAACH,IAAI,CAACC,KAAK,CAAC,EAAE;UAC3CD,IAAI,CAACC,KAAK,CAACN,OAAO,CAACS,KAAK,IAAI;YAC1B,IAAIF,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC,IAAIA,KAAK,CAACX,MAAM,IAAI,CAAC,EAAE;cAC7CC,MAAM,CAACK,IAAI,CAAC,CAACK,KAAK,CAAC,CAAC,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC;UACF,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;MAEF,IAAIV,MAAM,CAACD,MAAM,GAAG,CAAC,EAAE;QACrB,MAAMY,MAAM,GAAGpC,CAAC,CAACqC,YAAY,CAACZ,MAAM,CAAC;QACrCF,GAAG,CAACe,SAAS,CAACF,MAAM,EAAE;UAAEG,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE;QAAE,CAAC,CAAC;MAC9C;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IACpD;EACF,CAAC,EAAE,CAACpB,KAAK,EAAEC,KAAK,EAAEE,GAAG,CAAC,CAAC;EAEvB,OAAO,IAAI;AACb;;AAEA;AAAAD,EAAA,CAxCSH,gBAAgB;EAAA,QACXtB,MAAM;AAAA;AAAA6C,EAAA,GADXvB,gBAAgB;AAyCzB,MAAMwB,cAAc,GAAIC,SAAS,IAAK;EACpC,IAAI,CAACA,SAAS,EAAE,OAAO,EAAE;;EAEzB;EACA,IAAI,OAAOA,SAAS,KAAK,QAAQ,IAAIA,SAAS,CAACC,UAAU,CAAC,YAAY,CAAC,EAAE;IACvE,IAAI;MACF;MACA,MAAMC,SAAS,GAAGF,SAAS,CAACG,SAAS,CAAC,EAAE,EAAEH,SAAS,CAACpB,MAAM,GAAG,CAAC,CAAC;MAC/D,OAAOsB,SAAS,CAACE,KAAK,CAAC,GAAG,CAAC,CAACzB,GAAG,CAAC0B,IAAI,IAAI;QACtC,MAAM,CAACC,GAAG,EAAEC,GAAG,CAAC,GAAGF,IAAI,CAACG,IAAI,CAAC,CAAC,CAACJ,KAAK,CAAC,GAAG,CAAC;QACzC,OAAO,CAACK,UAAU,CAACF,GAAG,CAAC,EAAEE,UAAU,CAACH,GAAG,CAAC,CAAC,CAAC,CAAC;MAC7C,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOI,CAAC,EAAE;MACVb,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEc,CAAC,CAAC;MAC7C,OAAO,EAAE;IACX;EACF;;EAEA;EACA,IAAIrB,KAAK,CAACC,OAAO,CAACU,SAAS,CAAC,EAAE;IAC5B,OAAOA,SAAS;EAClB;;EAEA;EACA,IAAI,OAAOA,SAAS,KAAK,QAAQ,EAAE;IACjC,IAAI;MACF,MAAMW,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACb,SAAS,CAAC;MACpC,IAAIX,KAAK,CAACC,OAAO,CAACqB,MAAM,CAAC,EAAE;QACzB,OAAOA,MAAM;MACf;IACF,CAAC,CAAC,OAAOD,CAAC,EAAE;MACV;IAAA;EAEJ;EAEA,OAAO,EAAE;AACX,CAAC;AAED,MAAMI,eAAe,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAC5B,MAAM;IAAEC,SAAS;IAAEC,cAAc;IAAEC,SAAS;IAAEC,cAAc;IAAEC;EAAW,CAAC,GAAG1E,UAAU,CAACQ,eAAe,CAAC;EACxG,MAAM;IAAE6B;EAAK,CAAC,GAAGrC,UAAU,CAACS,WAAW,CAAC;EACxC,MAAM,CAACkE,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG7E,QAAQ,CAAC,EAAE,CAAC;EAC9D,MAAM,CAAC8E,SAAS,EAAEC,YAAY,CAAC,GAAG/E,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACgF,WAAW,EAAEC,cAAc,CAAC,GAAGjF,QAAQ,CAAC,IAAIkF,IAAI,CAAC,CAAC,CAAC;EAC1D,MAAM,CAACC,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGpF,QAAQ,CAAC,EAAE,CAAC;EACpE,MAAM,CAACqF,SAAS,EAAEC,YAAY,CAAC,GAAGtF,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACuF,cAAc,EAAEC,iBAAiB,CAAC,GAAGxF,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAMyF,MAAM,GAAGvF,MAAM,CAAC,IAAI,CAAC;EAE3BH,SAAS,CAAC,MAAM;IACd,MAAM2F,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9BX,YAAY,CAAC,IAAI,CAAC;MAClB,MAAMY,OAAO,CAACC,GAAG,CAAC,CAACpB,cAAc,CAAC,CAAC,EAAEE,cAAc,CAAC,CAAC,CAAC,CAAC;MACvDO,cAAc,CAAC,IAAIC,IAAI,CAAC,CAAC,CAAC;MAC1BH,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC;IAEDW,WAAW,CAAC,CAAC;IACb,MAAMG,UAAU,GAAGC,WAAW,CAACJ,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC;;IAEpD,OAAO,MAAMK,aAAa,CAACF,UAAU,CAAC;EACxC,CAAC,EAAE,CAACrB,cAAc,EAAEE,cAAc,CAAC,CAAC;EAEpC3E,SAAS,CAAC,MAAM;IACd,IAAIwE,SAAS,EAAE;MACb,MAAMyB,QAAQ,GAAGzB,SAAS,CAAC0B,MAAM,CAACC,CAAC,IAAIA,CAAC,CAAC3D,QAAQ,IAAI2D,CAAC,CAAC1D,SAAS,CAAC;MACjEqC,oBAAoB,CAACmB,QAAQ,CAAC;IAChC;EACF,CAAC,EAAE,CAACzB,SAAS,CAAC,CAAC;EAEfxE,SAAS,CAAC,MAAM;IACd,IAAI0E,SAAS,EAAE;MACb,MAAMP,MAAM,GAAGO,SAAS,CAACvC,GAAG,CAACQ,IAAI,KAAK;QACpC,GAAGA,IAAI;QACPyD,WAAW,EAAE7C,cAAc,CAACZ,IAAI,CAACC,KAAK;MACxC,CAAC,CAAC,CAAC,CAACsD,MAAM,CAACvD,IAAI,IAAIA,IAAI,CAACyD,WAAW,CAAChE,MAAM,GAAG,CAAC,CAAC;MAE/CiD,uBAAuB,CAAClB,MAAM,CAAC;IACjC;EACF,CAAC,EAAE,CAACO,SAAS,CAAC,CAAC;;EAEf;EACF,MAAM2B,cAAc,GAAInC,CAAC,IAAK;IAC5B;IACA,IAAI,CAACA,CAAC,IAAI,CAACA,CAAC,CAACoC,MAAM,EAAE;MACnBjD,OAAO,CAACkD,IAAI,CAAC,iDAAiD,EAAErC,CAAC,CAAC;MAClE;IACF;IAEA,IAAI,CAACoB,SAAS,EAAE;IAEhB,MAAM;MAAEvB,GAAG;MAAED;IAAI,CAAC,GAAGI,CAAC,CAACoC,MAAM;IAE7B,IAAI,CAACd,cAAc,EAAE;MACnB;MACAC,iBAAiB,CAAC;QAAE1B,GAAG;QAAED;MAAI,CAAC,CAAC;IACjC,CAAC,MAAM;MACL;MACA,MAAM0C,WAAW,GAAG;QAAEzC,GAAG;QAAED;MAAI,CAAC;MAChCc,UAAU,CAACY,cAAc,EAAEgB,WAAW,CAAC;;MAEvC;MACAjB,YAAY,CAAC,KAAK,CAAC;MACnBE,iBAAiB,CAAC,IAAI,CAAC;IACzB;EACF,CAAC;EACC,MAAMgB,eAAe,GAAGA,CAAA,KAAM;IAC5BlB,YAAY,CAAC,CAACD,SAAS,CAAC;IACxB,IAAIA,SAAS,EAAE;MACb;MACAG,iBAAiB,CAAC,IAAI,CAAC;IACzB;EACF,CAAC;EAED,MAAMiB,UAAU,GAAIC,IAAI,IAAK;IAC3B,IAAI,EAAEA,IAAI,YAAYxB,IAAI,CAAC,EAAE;MAC3B,IAAI;QACFwB,IAAI,GAAG,IAAIxB,IAAI,CAACwB,IAAI,CAAC;MACvB,CAAC,CAAC,OAAOzC,CAAC,EAAE;QACV,OAAO,SAAS;MAClB;IACF;IACA,OAAOyC,IAAI,CAACC,kBAAkB,CAAC,CAAC;EAClC,CAAC;EAED,IAAI7B,SAAS,IAAIF,iBAAiB,CAACzC,MAAM,KAAK,CAAC,IAAIgD,oBAAoB,CAAChD,MAAM,KAAK,CAAC,EAAE;IACpF,oBAAOpB,OAAA;MAAKa,SAAS,EAAC,aAAa;MAAAgF,QAAA,EAAC;IAAc;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC1D;;EAEA;EACA,IAAIC,SAAS,GAAG,CAAC;IAAEC,SAAS,GAAG,CAAC;EAEhC,IAAItC,iBAAiB,CAACzC,MAAM,GAAG,CAAC,EAAE;IAChC8E,SAAS,GAAGrC,iBAAiB,CAACuC,MAAM,CAAC,CAACC,GAAG,EAAElB,CAAC,KAAKkB,GAAG,GAAGlB,CAAC,CAAC3D,QAAQ,EAAE,CAAC,CAAC,GAAGqC,iBAAiB,CAACzC,MAAM;IAChG+E,SAAS,GAAGtC,iBAAiB,CAACuC,MAAM,CAAC,CAACC,GAAG,EAAElB,CAAC,KAAKkB,GAAG,GAAGlB,CAAC,CAAC1D,SAAS,EAAE,CAAC,CAAC,GAAGoC,iBAAiB,CAACzC,MAAM;EACnG,CAAC,MAAM;IACL;IACA8E,SAAS,GAAG,CAAC;IACbC,SAAS,GAAG,CAAC;EACf;EAEA,oBACEnG,OAAA;IAAKa,SAAS,EAAC,eAAe;IAAAgF,QAAA,gBAC5B7F,OAAA;MAAKa,SAAS,EAAC,YAAY;MAAAgF,QAAA,gBACzB7F,OAAA;QAAA6F,QAAA,EAAI;MAAa;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACtBjG,OAAA;QAAKa,SAAS,EAAC,cAAc;QAAAgF,QAAA,gBAC3B7F,OAAA;UACEa,SAAS,EAAE,gBAAgByD,SAAS,GAAG,QAAQ,GAAG,EAAE,EAAG;UACvDgC,OAAO,EAAEb,eAAgB;UAAAI,QAAA,EAExBvB,SAAS,GAAG,cAAc,GAAG;QAAc;UAAAwB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtC,CAAC,EAER3B,SAAS,IAAI,CAACE,cAAc,iBAC3BxE,OAAA;UAAKa,SAAS,EAAC,oBAAoB;UAAAgF,QAAA,EAAC;QAAkC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAC5E,EAEA3B,SAAS,IAAIE,cAAc,iBAC1BxE,OAAA;UAAKa,SAAS,EAAC,oBAAoB;UAAAgF,QAAA,EAAC;QAA+B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CACzE,eAEDjG,OAAA;UAAMa,SAAS,EAAC,cAAc;UAAAgF,QAAA,GAAC,gBACf,EAACH,UAAU,CAACzB,WAAW,CAAC;QAAA;UAAA6B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENjG,OAAA,CAACZ,YAAY;MACXmH,MAAM,EAAE,CAACL,SAAS,EAAEC,SAAS,CAAE;MAC/BK,IAAI,EAAE,CAAE;MACRC,KAAK,EAAE;QAAEC,MAAM,EAAE,OAAO;QAAEC,KAAK,EAAE;MAAO,CAAE;MAC1CC,GAAG,EAAElC,MAAO;MACZ4B,OAAO,EAAEjB,cAAe;MAAAQ,QAAA,gBAExB7F,OAAA,CAACX,SAAS;QACRwH,WAAW,EAAC,yFAAyF;QACrGC,GAAG,EAAC;MAAoD;QAAAhB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC,EAGDpC,iBAAiB,CAAC1C,GAAG,CAACgE,CAAC,iBACtBnF,OAAA,CAACV,MAAM;QAELyH,QAAQ,EAAE,CAAC5B,CAAC,CAAC3D,QAAQ,EAAE2D,CAAC,CAAC1D,SAAS,CAAE;QACpC5B,IAAI,EAAEa,gBAAgB,CAACyE,CAAC,CAAC6B,EAAE,MAAKzF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEyF,EAAE,IAAG,SAAS,GAAG,SAAS,CAAE;QAAAnB,QAAA,eAElE7F,OAAA,CAACT,KAAK;UAAAsG,QAAA,eACJ7F,OAAA;YAAKa,SAAS,EAAC,YAAY;YAAAgF,QAAA,gBACzB7F,OAAA;cAAA6F,QAAA,EAAKV,CAAC,CAAC8B;YAAQ;cAAAnB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACrBjG,OAAA;cAAKa,SAAS,EAAC,aAAa;cAAAgF,QAAA,gBAC1B7F,OAAA;gBAAMa,SAAS,EAAC;cAAY;gBAAAiF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,UAEtC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNjG,OAAA;cAAKa,SAAS,EAAC,eAAe;cAAAgF,QAAA,GAAC,eAChB,EAACV,CAAC,CAAC3D,QAAQ,CAAC0F,OAAO,CAAC,CAAC,CAAC,EAAC,IAAE,EAAC/B,CAAC,CAAC1D,SAAS,CAACyF,OAAO,CAAC,CAAC,CAAC;YAAA;cAAApB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1D,CAAC,eACNjG,OAAA;cAAKa,SAAS,EAAC,kBAAkB;cAAAgF,QAAA,GAAC,eACnB,EAACH,UAAU,CAACP,CAAC,CAACgC,WAAW,CAAC;YAAA;cAAArB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpC,CAAC,EACLd,CAAC,CAAC6B,EAAE,MAAKzF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEyF,EAAE,kBAChBhH,OAAA;cAAKa,SAAS,EAAC,kBAAkB;cAAAgF,QAAA,EAAC;YAAW;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CACnD;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MAAC,GArBH,QAAQd,CAAC,CAAC6B,EAAE,EAAE;QAAAlB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAsBb,CACT,CAAC,EAGD3B,SAAS,IAAIE,cAAc,iBAC1BxE,OAAA,CAACV,MAAM;QACLyH,QAAQ,EAAE,CAACvC,cAAc,CAACzB,GAAG,EAAEyB,cAAc,CAAC1B,GAAG,CAAE;QACnDjD,IAAI,EAAEa,gBAAgB,CAAC,SAAS,CAAE;QAAAmF,QAAA,eAElC7F,OAAA,CAACT,KAAK;UAAAsG,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvB,CACT,EAGA7B,oBAAoB,CAACjD,GAAG,CAAC,CAACQ,IAAI,EAAEyF,GAAG,kBAClCpH,OAAA,CAACR,QAAQ;QAEP6H,SAAS,EAAE1F,IAAI,CAACyD,WAAY;QAC5BzE,KAAK,EAAEgB,IAAI,CAAC2F,OAAO,MAAK/F,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEyF,EAAE,IAAG,SAAS,GAAG,SAAU;QACzDO,MAAM,EAAE,CAAE;QACVC,OAAO,EAAE,GAAI;QAAA3B,QAAA,eAEb7F,OAAA,CAACT,KAAK;UAAAsG,QAAA,eACJ7F,OAAA;YAAKa,SAAS,EAAC,YAAY;YAAAgF,QAAA,gBACzB7F,OAAA;cAAA6F,QAAA,EAAI;YAAiB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC1BjG,OAAA;cAAA6F,QAAA,gBAAG7F,OAAA;gBAAA6F,QAAA,EAAQ;cAAK;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACtE,IAAI,CAACsF,QAAQ,IAAI,SAAS;YAAA;cAAAnB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC1DjG,OAAA;cAAA6F,QAAA,gBAAG7F,OAAA;gBAAA6F,QAAA,EAAQ;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACP,UAAU,CAAC/D,IAAI,CAAC8F,UAAU,CAAC;YAAA;cAAA3B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EAC7DtE,IAAI,CAACyD,WAAW,CAAChE,MAAM,GAAG,CAAC,iBAC1BpB,OAAA,CAAAE,SAAA;cAAA2F,QAAA,gBACE7F,OAAA;gBAAA6F,QAAA,gBAAG7F,OAAA;kBAAA6F,QAAA,EAAQ;gBAAK;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,EAACtE,IAAI,CAACyD,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC8B,OAAO,CAAC,CAAC,CAAC,EAAC,IAAE,EAACvF,IAAI,CAACyD,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC8B,OAAO,CAAC,CAAC,CAAC;cAAA;gBAAApB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACtGjG,OAAA;gBAAA6F,QAAA,gBAAG7F,OAAA;kBAAA6F,QAAA,EAAQ;gBAAG;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,EAACtE,IAAI,CAACyD,WAAW,CAACzD,IAAI,CAACyD,WAAW,CAAChE,MAAM,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC8F,OAAO,CAAC,CAAC,CAAC,EAAC,IAAE,EAACvF,IAAI,CAACyD,WAAW,CAACzD,IAAI,CAACyD,WAAW,CAAChE,MAAM,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC8F,OAAO,CAAC,CAAC,CAAC;cAAA;gBAAApB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA,eACpJ,CACH;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MAAC,GAlBH,QAAQtE,IAAI,CAACqF,EAAE,IAAII,GAAG,EAAE;QAAAtB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAmBrB,CACX,CAAC,eAGFjG,OAAA,CAACe,gBAAgB;QACfC,KAAK,EAAE6C,iBAAkB;QACzB5C,KAAK,EAAEmD;MAAqB;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7B,CAAC,EAGD3B,SAAS,iBACRtE,OAAA;QACEsG,OAAO,EAAEjB,cAAe;QACxBoB,KAAK,EAAE;UACLM,QAAQ,EAAE,UAAU;UACpBW,GAAG,EAAE,CAAC;UACNC,IAAI,EAAE,CAAC;UACPC,KAAK,EAAE,CAAC;UACRC,MAAM,EAAE,CAAC;UACTC,MAAM,EAAE,IAAI;UACZC,MAAM,EAAE,WAAW;UACnBC,aAAa,EAAE1D,SAAS,GAAG,MAAM,GAAG;QACtC;MAAE;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACF;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACW,CAAC,eAEfjG,OAAA;MAAKa,SAAS,EAAC,YAAY;MAAAgF,QAAA,gBACzB7F,OAAA;QAAA6F,QAAA,EAAI;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnBjG,OAAA;QAAKa,SAAS,EAAC,cAAc;QAAAgF,QAAA,gBAC3B7F,OAAA;UAAKa,SAAS,EAAC,aAAa;UAAAgF,QAAA,gBAC1B7F,OAAA;YAAKa,SAAS,EAAC,eAAe;YAAC4F,KAAK,EAAE;cAAEwB,eAAe,EAAE;YAAU;UAAE;YAAAnC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC5EjG,OAAA;YAAA6F,QAAA,EAAM;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvB,CAAC,eACNjG,OAAA;UAAKa,SAAS,EAAC,aAAa;UAAAgF,QAAA,gBAC1B7F,OAAA;YAAKa,SAAS,EAAC,eAAe;YAAC4F,KAAK,EAAE;cAAEwB,eAAe,EAAE;YAAU;UAAE;YAAAnC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC5EjG,OAAA;YAAA6F,QAAA,EAAM;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrB,CAAC,eACNjG,OAAA;UAAKa,SAAS,EAAC,aAAa;UAAAgF,QAAA,gBAC1B7F,OAAA;YAAKa,SAAS,EAAC,aAAa;YAAC4F,KAAK,EAAE;cAAEwB,eAAe,EAAE;YAAU;UAAE;YAAAnC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC1EjG,OAAA;YAAA6F,QAAA,EAAM;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC,eACNjG,OAAA;UAAKa,SAAS,EAAC,aAAa;UAAAgF,QAAA,gBAC1B7F,OAAA;YAAKa,SAAS,EAAC,aAAa;YAAC4F,KAAK,EAAE;cAAEwB,eAAe,EAAE;YAAU;UAAE;YAAAnC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC1EjG,OAAA;YAAA6F,QAAA,EAAM;UAAkB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5B,CAAC,EACL3B,SAAS,iBACRtE,OAAA;UAAKa,SAAS,EAAC,aAAa;UAAAgF,QAAA,gBAC1B7F,OAAA;YAAKa,SAAS,EAAC,eAAe;YAAC4F,KAAK,EAAE;cAAEwB,eAAe,EAAE;YAAU;UAAE;YAAAnC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC5EjG,OAAA;YAAA6F,QAAA,EAAM;UAAuB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjC,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNjG,OAAA;MAAKa,SAAS,EAAC,gBAAgB;MAAAgF,QAAA,gBAC7B7F,OAAA;QAAA6F,QAAA,EAAI;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnBjG,OAAA;QAAKa,SAAS,EAAC,WAAW;QAAAgF,QAAA,gBACxB7F,OAAA;UAAKa,SAAS,EAAC,WAAW;UAAAgF,QAAA,gBACxB7F,OAAA;YAAA6F,QAAA,EAAQ;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAACpC,iBAAiB,CAACzC,MAAM;QAAA;UAAA0E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrD,CAAC,eACNjG,OAAA;UAAKa,SAAS,EAAC,WAAW;UAAAgF,QAAA,gBACxB7F,OAAA;YAAA6F,QAAA,EAAQ;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAAC7B,oBAAoB,CAAChD,MAAM;QAAA;UAAA0E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CAAC,eACNjG,OAAA;UAAKa,SAAS,EAAC,WAAW;UAAAgF,QAAA,gBACxB7F,OAAA;YAAA6F,QAAA,EAAQ;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAACP,UAAU,CAACzB,WAAW,CAAC;QAAA;UAAA6B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAEL7B,oBAAoB,CAAChD,MAAM,GAAG,CAAC,iBAC9BpB,OAAA;QAAKa,SAAS,EAAC,cAAc;QAAAgF,QAAA,gBAC3B7F,OAAA;UAAA6F,QAAA,EAAI;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACrBjG,OAAA;UAAKa,SAAS,EAAC,YAAY;UAAAgF,QAAA,EACxBzB,oBAAoB,CAAC8D,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC/G,GAAG,CAAC,CAACQ,IAAI,EAAEyF,GAAG,kBAC9CpH,OAAA;YAAea,SAAS,EAAC,WAAW;YAAAgF,QAAA,gBAClC7F,OAAA;cAAKa,SAAS,EAAC,aAAa;cAAAgF,QAAA,gBAC1B7F,OAAA;gBAAA6F,QAAA,EAASlE,IAAI,CAACsF,QAAQ,IAAI;cAAc;gBAAAnB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC,eAClDjG,OAAA;gBAAA6F,QAAA,EAAOH,UAAU,CAAC/D,IAAI,CAAC8F,UAAU;cAAC;gBAAA3B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvC,CAAC,eACNjG,OAAA;cAAKa,SAAS,EAAC,cAAc;cAAAgF,QAAA,EAC1BlE,IAAI,CAACyD,WAAW,CAAChE,MAAM,GAAG,CAAC,iBAC1BpB,OAAA,CAAAE,SAAA;gBAAA2F,QAAA,gBACE7F,OAAA;kBAAA6F,QAAA,GAAO,QACC,EAAClE,IAAI,CAACyD,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC8B,OAAO,CAAC,CAAC,CAAC,EAAC,IAAE,EAACvF,IAAI,CAACyD,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC8B,OAAO,CAAC,CAAC,CAAC;gBAAA;kBAAApB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxE,CAAC,eACRjG,OAAA;kBAAA6F,QAAA,GAAO,MACD,EAAClE,IAAI,CAACyD,WAAW,CAACzD,IAAI,CAACyD,WAAW,CAAChE,MAAM,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC8F,OAAO,CAAC,CAAC,CAAC,EAAC,IAAE,EAACvF,IAAI,CAACyD,WAAW,CAACzD,IAAI,CAACyD,WAAW,CAAChE,MAAM,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC8F,OAAO,CAAC,CAAC,CAAC;gBAAA;kBAAApB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACtH,CAAC;cAAA,eACR;YACH;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA,GAhBEmB,GAAG;YAAAtB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAiBR,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC1C,GAAA,CA7SID,eAAe;AAAA6E,GAAA,GAAf7E,eAAe;AA+SrB,eAAeA,eAAe;AAAC,IAAAhB,EAAA,EAAA6F,GAAA;AAAAC,YAAA,CAAA9F,EAAA;AAAA8F,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}