{"ast":null,"code":"var _jsxFileName = \"/home/projectwork/project/project_6/auth-system/frontend/src/components/UserLocationMap.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useContext, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport { LocationContext } from '../context/LocationContext';\nimport { AuthContext } from '../context/AuthContext';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './UserLocationMap.css';\n\n// Fix for default icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Component to update map bounds based on users' positions\nfunction MapBoundsUpdater({\n  users\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (users.length > 0) {\n      const bounds = L.latLngBounds(users.map(user => [user.latitude, user.longitude]));\n      map.fitBounds(bounds, {\n        padding: [50, 50]\n      });\n    }\n  }, [users, map]);\n  return null;\n}\n// Helper to parse route data in either WKT LINESTRING or JSON format\n_s(MapBoundsUpdater, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = MapBoundsUpdater;\nconst parseRouteData = routeData => {\n  if (!routeData) return [];\n\n  // Check if it's a WKT LINESTRING\n  if (typeof routeData === 'string' && routeData.startsWith('LINESTRING')) {\n    // Parse the LINESTRING(lng lat, lng lat, ...) format\n    const coordsStr = routeData.substring(11, routeData.length - 1);\n    return coordsStr.split(',').map(pair => {\n      const [lng, lat] = pair.trim().split(' ');\n      return [parseFloat(lat), parseFloat(lng)];\n    });\n  }\n\n  // Check if it's a JSON string\n  if (typeof routeData === 'string' && (routeData.startsWith('[') || routeData.startsWith('{'))) {\n    try {\n      const parsed = JSON.parse(routeData);\n      // Handle array of {lat, lng} objects\n      if (Array.isArray(parsed)) {\n        return parsed.map(point => [point.lat, point.lng]);\n      }\n    } catch (e) {\n      console.error('Error parsing JSON route data:', e);\n    }\n  }\n  return [];\n};\n\n// Then in your component, use this instead of parseLineString:\n{\n  livePaths.map((p, idx) => {\n    var _user;\n    const positions = parseRouteData(p.route);\n    return /*#__PURE__*/_jsxDEV(Polyline, {\n      positions: positions,\n      color: p.user_id === ((_user = user) === null || _user === void 0 ? void 0 : _user.id) ? 'blue' : 'red',\n      weight: 4\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }, this);\n  });\n}\n\n// Helper to parse a WKT LINESTRING in the format \"LINESTRING(lng lat, lng lat, ...)\"\n// and return an array of [lat, lng] coordinates\nconst parseLineString = lineString => {\n  // Remove the WORD \"LINESTRING(\" and the trailing \")\"\n  const coordsStr = lineString.substring(11, lineString.length - 1);\n  return coordsStr.split(',').map(pair => {\n    const [lng, lat] = pair.trim().split(' ');\n    return [parseFloat(lat), parseFloat(lng)];\n  });\n};\nconst UserLocationMap = () => {\n  _s2();\n  const {\n    liveUsers,\n    fetchLiveUsers,\n    livePaths,\n    fetchLivePaths\n  } = useContext(LocationContext);\n  const {\n    user\n  } = useContext(AuthContext);\n  const [usersWithLocation, setUsersWithLocation] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState(new Date());\n  const mapRef = useRef(null);\n  useEffect(() => {\n    const loadMapData = async () => {\n      setIsLoading(true);\n      await fetchLiveUsers();\n      await fetchLivePaths();\n      setLastUpdated(new Date());\n      setIsLoading(false);\n    };\n    loadMapData();\n    const intervalId = setInterval(() => {\n      loadMapData();\n    }, 15000);\n    return () => clearInterval(intervalId);\n  }, [fetchLiveUsers, fetchLivePaths]);\n  useEffect(() => {\n    if (liveUsers) {\n      const filtered = liveUsers.filter(u => u.latitude && u.longitude);\n      setUsersWithLocation(filtered);\n    }\n  }, [liveUsers]);\n  const formatTime = date => date.toLocaleTimeString();\n  if (isLoading && usersWithLocation.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-loading\",\n      children: \"Loading map...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 12\n    }, this);\n  }\n  if (usersWithLocation.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-location-data\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No Location Data Available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"None of the active users have selected a location yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Calculate center point for map display\n  const centerLat = usersWithLocation.reduce((sum, u) => sum + u.latitude, 0) / usersWithLocation.length;\n  const centerLng = usersWithLocation.reduce((sum, u) => sum + u.longitude, 0) / usersWithLocation.length;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Live User Map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-stats\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [usersWithLocation.length, \" users with location\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Last updated: \", formatTime(lastUpdated)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [centerLat, centerLng],\n      zoom: 2,\n      style: {\n        height: '500px',\n        width: '100%'\n      },\n      ref: mapRef,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), usersWithLocation.map(u => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [u.latitude, u.longitude],\n        icon: u.id === (user === null || user === void 0 ? void 0 : user.id) ? L.divIcon({\n          className: 'custom-div-icon',\n          html: `<div class=\"marker-pin current-user\"></div>`,\n          iconSize: [30, 42],\n          iconAnchor: [15, 42]\n        }) : L.divIcon({\n          className: 'custom-div-icon',\n          html: `<div class=\"marker-pin other-user\"></div>`,\n          iconSize: [30, 42],\n          iconAnchor: [15, 42]\n        }),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-popup\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: u.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-status\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this), \"Online\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-location\",\n              children: [\"Coordinates: \", u.latitude.toFixed(4), \", \", u.longitude.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), u.id === (user === null || user === void 0 ? void 0 : user.id) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-user-tag\",\n              children: \"This is you\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this)\n      }, u.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }, this)), livePaths.map((p, idx) => {\n        const positions = parseLineString(p.route);\n        return /*#__PURE__*/_jsxDEV(Polyline, {\n          positions: positions,\n          color: p.user_id === (user === null || user === void 0 ? void 0 : user.id) ? 'blue' : 'red',\n          weight: 4\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(MapBoundsUpdater, {\n        users: usersWithLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-legend\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-marker current-user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Your location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-marker other-user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Other users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_s2(UserLocationMap, \"xz4BR5xUKQ6Aw/Pn0+Kcw2MsSXg=\");\n_c2 = UserLocationMap;\nexport default UserLocationMap;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapBoundsUpdater\");\n$RefreshReg$(_c2, \"UserLocationMap\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useRef","MapContainer","TileLayer","Marker","Popup","Polyline","useMap","LocationContext","AuthContext","L","icon","iconShadow","jsxDEV","_jsxDEV","DefaultIcon","iconUrl","shadowUrl","iconSize","iconAnchor","prototype","options","MapBoundsUpdater","users","_s","map","length","bounds","latLngBounds","user","latitude","longitude","fitBounds","padding","_c","parseRouteData","routeData","startsWith","coordsStr","substring","split","pair","lng","lat","trim","parseFloat","parsed","JSON","parse","Array","isArray","point","e","console","error","livePaths","p","idx","_user","positions","route","color","user_id","id","weight","fileName","_jsxFileName","lineNumber","columnNumber","parseLineString","lineString","UserLocationMap","_s2","liveUsers","fetchLiveUsers","fetchLivePaths","usersWithLocation","setUsersWithLocation","isLoading","setIsLoading","lastUpdated","setLastUpdated","Date","mapRef","loadMapData","intervalId","setInterval","clearInterval","filtered","filter","u","formatTime","date","toLocaleTimeString","className","children","centerLat","reduce","sum","centerLng","center","zoom","style","height","width","ref","attribution","url","position","divIcon","html","username","toFixed","_c2","$RefreshReg$"],"sources":["/home/projectwork/project/project_6/auth-system/frontend/src/components/UserLocationMap.js"],"sourcesContent":["import React, { useEffect, useState, useContext, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport { LocationContext } from '../context/LocationContext';\nimport { AuthContext } from '../context/AuthContext';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './UserLocationMap.css';\n\n// Fix for default icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Component to update map bounds based on users' positions\nfunction MapBoundsUpdater({ users }) {\n  const map = useMap();\n  \n  useEffect(() => {\n    if (users.length > 0) {\n      const bounds = L.latLngBounds(users.map(user => [user.latitude, user.longitude]));\n      map.fitBounds(bounds, { padding: [50, 50] });\n    }\n  }, [users, map]);\n  \n  return null;\n}\n// Helper to parse route data in either WKT LINESTRING or JSON format\nconst parseRouteData = (routeData) => {\n  if (!routeData) return [];\n  \n  // Check if it's a WKT LINESTRING\n  if (typeof routeData === 'string' && routeData.startsWith('LINESTRING')) {\n    // Parse the LINESTRING(lng lat, lng lat, ...) format\n    const coordsStr = routeData.substring(11, routeData.length - 1);\n    return coordsStr.split(',').map(pair => {\n      const [lng, lat] = pair.trim().split(' ');\n      return [parseFloat(lat), parseFloat(lng)];\n    });\n  }\n  \n  // Check if it's a JSON string\n  if (typeof routeData === 'string' && (routeData.startsWith('[') || routeData.startsWith('{'))) {\n    try {\n      const parsed = JSON.parse(routeData);\n      // Handle array of {lat, lng} objects\n      if (Array.isArray(parsed)) {\n        return parsed.map(point => [point.lat, point.lng]);\n      }\n    } catch (e) {\n      console.error('Error parsing JSON route data:', e);\n    }\n  }\n  \n  return [];\n};\n\n// Then in your component, use this instead of parseLineString:\n{livePaths.map((p, idx) => {\n  const positions = parseRouteData(p.route);\n  return (\n    <Polyline \n      key={idx} \n      positions={positions} \n      color={p.user_id === user?.id ? 'blue' : 'red'} \n      weight={4}\n    />\n  );\n})}\n\n// Helper to parse a WKT LINESTRING in the format \"LINESTRING(lng lat, lng lat, ...)\"\n// and return an array of [lat, lng] coordinates\nconst parseLineString = (lineString) => {\n  // Remove the WORD \"LINESTRING(\" and the trailing \")\"\n  const coordsStr = lineString.substring(11, lineString.length - 1);\n  return coordsStr.split(',').map(pair => {\n    const [lng, lat] = pair.trim().split(' ');\n    return [parseFloat(lat), parseFloat(lng)];\n  });\n};\n\nconst UserLocationMap = () => {\n  const { liveUsers, fetchLiveUsers, livePaths, fetchLivePaths } = useContext(LocationContext);\n  const { user } = useContext(AuthContext);\n  const [usersWithLocation, setUsersWithLocation] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState(new Date());\n  const mapRef = useRef(null);\n\n  useEffect(() => {\n    const loadMapData = async () => {\n      setIsLoading(true);\n      await fetchLiveUsers();\n      await fetchLivePaths();\n      setLastUpdated(new Date());\n      setIsLoading(false);\n    };\n\n    loadMapData();\n    const intervalId = setInterval(() => {\n      loadMapData();\n    }, 15000);\n    \n    return () => clearInterval(intervalId);\n  }, [fetchLiveUsers, fetchLivePaths]);\n\n  useEffect(() => {\n    if (liveUsers) {\n      const filtered = liveUsers.filter(u => u.latitude && u.longitude);\n      setUsersWithLocation(filtered);\n    }\n  }, [liveUsers]);\n\n  const formatTime = (date) => date.toLocaleTimeString();\n\n  if (isLoading && usersWithLocation.length === 0) {\n    return <div className=\"map-loading\">Loading map...</div>;\n  }\n\n  if (usersWithLocation.length === 0) {\n    return (\n      <div className=\"no-location-data\">\n        <h3>No Location Data Available</h3>\n        <p>None of the active users have selected a location yet.</p>\n      </div>\n    );\n  }\n\n  // Calculate center point for map display\n  const centerLat = usersWithLocation.reduce((sum, u) => sum + u.latitude, 0) / usersWithLocation.length;\n  const centerLng = usersWithLocation.reduce((sum, u) => sum + u.longitude, 0) / usersWithLocation.length;\n\n  return (\n    <div className=\"map-container\">\n      <div className=\"map-header\">\n        <h3>Live User Map</h3>\n        <div className=\"map-stats\">\n          <span>{usersWithLocation.length} users with location</span>\n          <span>Last updated: {formatTime(lastUpdated)}</span>\n        </div>\n      </div>\n      \n      <MapContainer \n        center={[centerLat, centerLng]} \n        zoom={2} \n        style={{ height: '500px', width: '100%' }}\n        ref={mapRef}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        \n        {usersWithLocation.map(u => (\n          <Marker \n            key={u.id} \n            position={[u.latitude, u.longitude]}\n            icon={u.id === user?.id ? \n              L.divIcon({\n                className: 'custom-div-icon',\n                html: `<div class=\"marker-pin current-user\"></div>`,\n                iconSize: [30, 42],\n                iconAnchor: [15, 42]\n              }) : \n              L.divIcon({\n                className: 'custom-div-icon',\n                html: `<div class=\"marker-pin other-user\"></div>`,\n                iconSize: [30, 42],\n                iconAnchor: [15, 42]\n              })\n            }\n          >\n            <Popup>\n              <div className=\"user-popup\">\n                <h3>{u.username}</h3>\n                <div className=\"user-status\">\n                  <span className=\"status-dot\"></span>\n                  Online\n                </div>\n                <div className=\"user-location\">\n                  Coordinates: {u.latitude.toFixed(4)}, {u.longitude.toFixed(4)}\n                </div>\n                {u.id === user?.id && (\n                  <div className=\"current-user-tag\">This is you</div>\n                )}\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n        \n        {/* Draw live user paths as polylines */}\n        {livePaths.map((p, idx) => {\n          const positions = parseLineString(p.route);\n          return (\n            <Polyline \n              key={idx} \n              positions={positions} \n              color={p.user_id === user?.id ? 'blue' : 'red'} \n              weight={4}\n            />\n          );\n        })}\n\n        <MapBoundsUpdater users={usersWithLocation} />\n      </MapContainer>\n      \n      <div className=\"map-legend\">\n        <div className=\"legend-item\">\n          <div className=\"legend-marker current-user\"></div>\n          <span>Your location</span>\n        </div>\n        <div className=\"legend-item\">\n          <div className=\"legend-marker other-user\"></div>\n          <span>Other users</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserLocationMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}