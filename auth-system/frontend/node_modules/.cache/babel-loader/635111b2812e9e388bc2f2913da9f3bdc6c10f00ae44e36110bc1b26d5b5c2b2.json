{"ast":null,"code":"var _jsxFileName = \"/home/projectwork/project/project_6/auth-system/frontend/src/components/UserLocationMap.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useContext, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport { LocationContext } from '../context/LocationContext';\nimport { AuthContext } from '../context/AuthContext';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './UserLocationMap.css';\n\n// Fix for default icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Component to update map bounds based on users' positions\nfunction MapBoundsUpdater({\n  users\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (users.length > 0) {\n      const bounds = L.latLngBounds(users.map(user => [user.latitude, user.longitude]));\n      map.fitBounds(bounds, {\n        padding: [50, 50]\n      });\n    }\n  }, [users, map]);\n  return null;\n}\n\n// Helper to parse route data in either WKT LINESTRING or JSON format\n_s(MapBoundsUpdater, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = MapBoundsUpdater;\nconst parseRouteData = routeData => {\n  if (!routeData) return [];\n\n  // Check if it's a WKT LINESTRING\n  if (typeof routeData === 'string' && routeData.startsWith('LINESTRING')) {\n    // Parse the LINESTRING(lng lat, lng lat, ...) format\n    const coordsStr = routeData.substring(11, routeData.length - 1);\n    return coordsStr.split(',').map(pair => {\n      const [lng, lat] = pair.trim().split(' ');\n      return [parseFloat(lat), parseFloat(lng)];\n    });\n  }\n\n  // Check if it's a JSON string\n  if (typeof routeData === 'string' && (routeData.startsWith('[') || routeData.startsWith('{'))) {\n    try {\n      const parsed = JSON.parse(routeData);\n      // Handle array of {lat, lng} objects\n      if (Array.isArray(parsed)) {\n        return parsed.map(point => [point.lat, point.lng]);\n      }\n    } catch (e) {\n      console.error('Error parsing JSON route data:', e);\n    }\n  }\n  return [];\n};\nconst UserLocationMap = () => {\n  _s2();\n  const {\n    liveUsers,\n    fetchLiveUsers,\n    livePaths,\n    fetchLivePaths\n  } = useContext(LocationContext);\n  const {\n    user\n  } = useContext(AuthContext);\n  const [usersWithLocation, setUsersWithLocation] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState(new Date());\n  const mapRef = useRef(null);\n  useEffect(() => {\n    const loadMapData = async () => {\n      setIsLoading(true);\n      await fetchLiveUsers();\n      await fetchLivePaths();\n      setLastUpdated(new Date());\n      setIsLoading(false);\n    };\n    loadMapData();\n    const intervalId = setInterval(() => {\n      loadMapData();\n    }, 15000);\n    return () => clearInterval(intervalId);\n  }, [fetchLiveUsers, fetchLivePaths]);\n  useEffect(() => {\n    if (liveUsers) {\n      const filtered = liveUsers.filter(u => u.latitude && u.longitude);\n      setUsersWithLocation(filtered);\n    }\n  }, [liveUsers]);\n  const formatTime = date => date.toLocaleTimeString();\n  if (isLoading && usersWithLocation.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-loading\",\n      children: \"Loading map...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 12\n    }, this);\n  }\n  if (usersWithLocation.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-location-data\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No Location Data Available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"None of the active users have selected a location yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Calculate center point for map display\n  const centerLat = usersWithLocation.reduce((sum, u) => sum + u.latitude, 0) / usersWithLocation.length;\n  const centerLng = usersWithLocation.reduce((sum, u) => sum + u.longitude, 0) / usersWithLocation.length;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Live User Map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-stats\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [usersWithLocation.length, \" users with location\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Last updated: \", formatTime(lastUpdated)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [centerLat, centerLng],\n      zoom: 2,\n      style: {\n        height: '500px',\n        width: '100%'\n      },\n      ref: mapRef,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), usersWithLocation.map(u => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [u.latitude, u.longitude],\n        icon: u.id === (user === null || user === void 0 ? void 0 : user.id) ? L.divIcon({\n          className: 'custom-div-icon',\n          html: `<div class=\"marker-pin current-user\"></div>`,\n          iconSize: [30, 42],\n          iconAnchor: [15, 42]\n        }) : L.divIcon({\n          className: 'custom-div-icon',\n          html: `<div class=\"marker-pin other-user\"></div>`,\n          iconSize: [30, 42],\n          iconAnchor: [15, 42]\n        }),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-popup\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: u.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-status\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 19\n              }, this), \"Online\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-location\",\n              children: [\"Coordinates: \", u.latitude.toFixed(4), \", \", u.longitude.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this), u.id === (user === null || user === void 0 ? void 0 : user.id) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-user-tag\",\n              children: \"This is you\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)\n      }, u.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this)), livePaths && livePaths.map((p, idx) => {\n        // Use the more robust parseRouteData function that can handle both formats\n        const positions = parseRouteData(p.route);\n\n        // Only render if we have valid positions\n        if (positions && positions.length > 0) {\n          return /*#__PURE__*/_jsxDEV(Polyline, {\n            positions: positions,\n            color: p.user_id === (user === null || user === void 0 ? void 0 : user.id) ? 'blue' : 'red',\n            weight: 4\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this);\n        }\n        return null;\n      }), /*#__PURE__*/_jsxDEV(MapBoundsUpdater, {\n        users: usersWithLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-legend\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-marker current-user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Your location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-marker other-user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Other users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-line\",\n          style: {\n            backgroundColor: 'blue'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Your path\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-line\",\n          style: {\n            backgroundColor: 'red'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Other users' paths\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n_s2(UserLocationMap, \"xz4BR5xUKQ6Aw/Pn0+Kcw2MsSXg=\");\n_c2 = UserLocationMap;\nexport default UserLocationMap;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapBoundsUpdater\");\n$RefreshReg$(_c2, \"UserLocationMap\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useRef","MapContainer","TileLayer","Marker","Popup","Polyline","useMap","LocationContext","AuthContext","L","icon","iconShadow","jsxDEV","_jsxDEV","DefaultIcon","iconUrl","shadowUrl","iconSize","iconAnchor","prototype","options","MapBoundsUpdater","users","_s","map","length","bounds","latLngBounds","user","latitude","longitude","fitBounds","padding","_c","parseRouteData","routeData","startsWith","coordsStr","substring","split","pair","lng","lat","trim","parseFloat","parsed","JSON","parse","Array","isArray","point","e","console","error","UserLocationMap","_s2","liveUsers","fetchLiveUsers","livePaths","fetchLivePaths","usersWithLocation","setUsersWithLocation","isLoading","setIsLoading","lastUpdated","setLastUpdated","Date","mapRef","loadMapData","intervalId","setInterval","clearInterval","filtered","filter","u","formatTime","date","toLocaleTimeString","className","children","fileName","_jsxFileName","lineNumber","columnNumber","centerLat","reduce","sum","centerLng","center","zoom","style","height","width","ref","attribution","url","position","id","divIcon","html","username","toFixed","p","idx","positions","route","color","user_id","weight","backgroundColor","_c2","$RefreshReg$"],"sources":["/home/projectwork/project/project_6/auth-system/frontend/src/components/UserLocationMap.js"],"sourcesContent":["import React, { useEffect, useState, useContext, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMap } from 'react-leaflet';\nimport { LocationContext } from '../context/LocationContext';\nimport { AuthContext } from '../context/AuthContext';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './UserLocationMap.css';\n\n// Fix for default icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Component to update map bounds based on users' positions\nfunction MapBoundsUpdater({ users }) {\n  const map = useMap();\n  \n  useEffect(() => {\n    if (users.length > 0) {\n      const bounds = L.latLngBounds(users.map(user => [user.latitude, user.longitude]));\n      map.fitBounds(bounds, { padding: [50, 50] });\n    }\n  }, [users, map]);\n  \n  return null;\n}\n\n// Helper to parse route data in either WKT LINESTRING or JSON format\nconst parseRouteData = (routeData) => {\n  if (!routeData) return [];\n  \n  // Check if it's a WKT LINESTRING\n  if (typeof routeData === 'string' && routeData.startsWith('LINESTRING')) {\n    // Parse the LINESTRING(lng lat, lng lat, ...) format\n    const coordsStr = routeData.substring(11, routeData.length - 1);\n    return coordsStr.split(',').map(pair => {\n      const [lng, lat] = pair.trim().split(' ');\n      return [parseFloat(lat), parseFloat(lng)];\n    });\n  }\n  \n  // Check if it's a JSON string\n  if (typeof routeData === 'string' && (routeData.startsWith('[') || routeData.startsWith('{'))) {\n    try {\n      const parsed = JSON.parse(routeData);\n      // Handle array of {lat, lng} objects\n      if (Array.isArray(parsed)) {\n        return parsed.map(point => [point.lat, point.lng]);\n      }\n    } catch (e) {\n      console.error('Error parsing JSON route data:', e);\n    }\n  }\n  \n  return [];\n};\n\nconst UserLocationMap = () => {\n  const { liveUsers, fetchLiveUsers, livePaths, fetchLivePaths } = useContext(LocationContext);\n  const { user } = useContext(AuthContext);\n  const [usersWithLocation, setUsersWithLocation] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdated, setLastUpdated] = useState(new Date());\n  const mapRef = useRef(null);\n\n  useEffect(() => {\n    const loadMapData = async () => {\n      setIsLoading(true);\n      await fetchLiveUsers();\n      await fetchLivePaths();\n      setLastUpdated(new Date());\n      setIsLoading(false);\n    };\n\n    loadMapData();\n    const intervalId = setInterval(() => {\n      loadMapData();\n    }, 15000);\n    \n    return () => clearInterval(intervalId);\n  }, [fetchLiveUsers, fetchLivePaths]);\n\n  useEffect(() => {\n    if (liveUsers) {\n      const filtered = liveUsers.filter(u => u.latitude && u.longitude);\n      setUsersWithLocation(filtered);\n    }\n  }, [liveUsers]);\n\n  const formatTime = (date) => date.toLocaleTimeString();\n\n  if (isLoading && usersWithLocation.length === 0) {\n    return <div className=\"map-loading\">Loading map...</div>;\n  }\n\n  if (usersWithLocation.length === 0) {\n    return (\n      <div className=\"no-location-data\">\n        <h3>No Location Data Available</h3>\n        <p>None of the active users have selected a location yet.</p>\n      </div>\n    );\n  }\n\n  // Calculate center point for map display\n  const centerLat = usersWithLocation.reduce((sum, u) => sum + u.latitude, 0) / usersWithLocation.length;\n  const centerLng = usersWithLocation.reduce((sum, u) => sum + u.longitude, 0) / usersWithLocation.length;\n\n  return (\n    <div className=\"map-container\">\n      <div className=\"map-header\">\n        <h3>Live User Map</h3>\n        <div className=\"map-stats\">\n          <span>{usersWithLocation.length} users with location</span>\n          <span>Last updated: {formatTime(lastUpdated)}</span>\n        </div>\n      </div>\n      \n      <MapContainer \n        center={[centerLat, centerLng]} \n        zoom={2} \n        style={{ height: '500px', width: '100%' }}\n        ref={mapRef}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        \n        {usersWithLocation.map(u => (\n          <Marker \n            key={u.id} \n            position={[u.latitude, u.longitude]}\n            icon={u.id === user?.id ? \n              L.divIcon({\n                className: 'custom-div-icon',\n                html: `<div class=\"marker-pin current-user\"></div>`,\n                iconSize: [30, 42],\n                iconAnchor: [15, 42]\n              }) : \n              L.divIcon({\n                className: 'custom-div-icon',\n                html: `<div class=\"marker-pin other-user\"></div>`,\n                iconSize: [30, 42],\n                iconAnchor: [15, 42]\n              })\n            }\n          >\n            <Popup>\n              <div className=\"user-popup\">\n                <h3>{u.username}</h3>\n                <div className=\"user-status\">\n                  <span className=\"status-dot\"></span>\n                  Online\n                </div>\n                <div className=\"user-location\">\n                  Coordinates: {u.latitude.toFixed(4)}, {u.longitude.toFixed(4)}\n                </div>\n                {u.id === user?.id && (\n                  <div className=\"current-user-tag\">This is you</div>\n                )}\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n        \n        {/* Draw live user paths as polylines */}\n        {livePaths && livePaths.map((p, idx) => {\n          // Use the more robust parseRouteData function that can handle both formats\n          const positions = parseRouteData(p.route);\n          \n          // Only render if we have valid positions\n          if (positions && positions.length > 0) {\n            return (\n              <Polyline \n                key={idx} \n                positions={positions} \n                color={p.user_id === user?.id ? 'blue' : 'red'} \n                weight={4}\n              />\n            );\n          }\n          return null;\n        })}\n\n        <MapBoundsUpdater users={usersWithLocation} />\n      </MapContainer>\n      \n      <div className=\"map-legend\">\n        <div className=\"legend-item\">\n          <div className=\"legend-marker current-user\"></div>\n          <span>Your location</span>\n        </div>\n        <div className=\"legend-item\">\n          <div className=\"legend-marker other-user\"></div>\n          <span>Other users</span>\n        </div>\n        <div className=\"legend-item\">\n          <div className=\"legend-line\" style={{ backgroundColor: 'blue' }}></div>\n          <span>Your path</span>\n        </div>\n        <div className=\"legend-item\">\n          <div className=\"legend-line\" style={{ backgroundColor: 'red' }}></div>\n          <span>Other users' paths</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserLocationMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}